<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulateur immersif TDAH & TSA</title>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin: 0;
  padding: 0;
  background: #f4f6f9;
  transition: background 0.5s;
}

.container {
  max-width: 800px;
  margin: auto;
  padding: 40px 20px;
}

button {
  padding: 12px 25px;
  font-size: 16px;
  margin: 10px;
  cursor: pointer;
}

.hidden { display: none; }

.popup {
  position: fixed;
  background: rgba(255,255,255,0.95);
  border-radius: 8px;
  border: 1px solid #000;
  padding: 10px 15px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  z-index: 999;
  font-weight: bold;
}

#text { transition: transform 0.1s, margin 0.1s; }
</style>
</head>

<body>

<div class="container">

  <!-- Home -->
  <div id="home">
    <h1>üß† Parcours immersif</h1>
    <p>Choisissez une exp√©rience :</p>
    <button onclick="startTDAH()">Simulation TDAH</button>
    <button onclick="startTSA()">Simulation TSA</button>
  </div>

  <!-- TDAH -->
  <div id="tdah" class="hidden">
    <h2>Simulation de concentration</h2>
    <p id="text">
      Le cerveau humain traite des milliers d'informations chaque seconde.
      La concentration permet de filtrer les √©l√©ments inutiles pour se
      focaliser sur une t√¢che pr√©cise.
    </p>
    <p id="timer"></p>
  </div>

  <!-- TSA -->
  <div id="tsa" class="hidden">
    <h2>Situation sociale</h2>
    <p>Vous devez commander un caf√© dans un environnement bruyant.</p>
    <button onclick="stress()">Commander</button>
    <p id="tsaMessage"></p>
  </div>

  <!-- End -->
  <div id="end" class="hidden">
    <h2>Fin de l'exp√©rience</h2>
    <p>
      Cette simulation illustre certaines difficult√©s possibles li√©es au
      TDAH et au TSA.
    </p>
    <p><strong>Chaque personne est unique.</strong></p>
  </div>

</div>

<!-- Sons -->
<audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>
<audio id="notifSound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>

<script>
let timeLeft = 30;
let interval;

// ------------------- TDAH -------------------
function startTDAH() {
  document.getElementById("home").classList.add("hidden");
  document.getElementById("tdah").classList.remove("hidden");

  // Jouer la musique de fond
  document.getElementById("bgMusic").volume = 0.15;
  document.getElementById("bgMusic").play();

  // Timer
  interval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = "Temps restant : " + timeLeft + " secondes";
    if(timeLeft <= 0) {
      clearInterval(interval);
      finish();
    }
  }, 1000);

  // Effets immersifs
  setTimeout(() => popup("üîî Nouveau message !"), 4000);
  setTimeout(() => popup("üí≠ Pens√©e intrusive..."), 7000);
  setTimeout(() => shakeText(), 12000);
  setTimeout(() => flashScreen(), 16000);
  setTimeout(() => randomMoveText(), 20000);
}

// Popup notifications
function popup(message) {
  let div = document.createElement("div");
  div.className = "popup";
  div.innerText = message;
  div.style.top = Math.random() * 70 + "%";
  div.style.left = Math.random() * 70 + "%";
  document.body.appendChild(div);

  // Jouer le son
  let sound = document.getElementById("notifSound");
  sound.currentTime = 0;
  sound.play();

  setTimeout(() => div.remove(), 3000);
}

// Shake du texte
function shakeText() {
  let text = document.getElementById("text");
  let count = 0;
  let move = setInterval(() => {
    text.style.marginLeft = (Math.random()*10 - 5) + "px";
    text.style.marginTop = (Math.random()*5 - 2.5) + "px";
    count++;
    if(count > 20) { clearInterval(move); text.style.margin = "0"; }
  }, 100);
}

// Flash √©cran
function flashScreen() {
  document.body.style.transition = "0.1s";
  document.body.style.background = "#ffcccc";
  setTimeout(() => { document.body.style.background = "#f4f6f9"; }, 200);
}

// Texte qui bouge
function randomMoveText() {
  let text = document.getElementById("text");
  let count = 0;
  let move = setInterval(() => {
    text.style.transform = `translate(${Math.random()*20-10}px, ${Math.random()*10-5}px)`;
    count++;
    if(count > 30) { clearInterval(move); text.style.transform = "translate(0,0)"; }
  }, 100);
}

// ------------------- TSA -------------------
function startTSA() {
  document.getElementById("home").classList.add("hidden");
  document.getElementById("tsa").classList.remove("hidden");

  // Musique de fond
  document.getElementById("bgMusic").volume = 0.1;
  document.getElementById("bgMusic").play();

  // Effets visuels
  document.body.style.background = "#fff5cc";
  setTimeout(() => popup("üí¨ Le serveur parle vite !"), 2000);
  setTimeout(() => popup("üîä Bruits de fond forts"), 4000);
  setTimeout(() => finish(), 8000);
}

// ------------------- Fin -------------------
function finish() {
  document.getElementById("tdah").classList.add("hidden");
  document.getElementById("tsa").classList.add("hidden");
  document.getElementById("end").classList.remove("hidden");

  // Stop musique
  document.getElementById("bgMusic").pause();
  document.getElementById("bgMusic").currentTime = 0;
}
</script>

</body>
</html>
